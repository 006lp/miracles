/*
 *  The main JavaScript file for Theme Miracles
 *  Author:  Eltrac
 *  License: MIT
 */
 
//toggleDark
function Dark() {
	$("body").toggleClass("body-dark");
}
//GoTop
function GoTop() {
	$('body,html').animate({scrollTop:0},500);
	document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
//LazyLoad
function LazyLoad() {
	jQuery(function() {
		jQuery("img").lazyload(
		  {threshold: 200,effect: "fadeIn"}
		);
	});
}
//Prism
function PrismLoad() {
    var pres = document.getElementsByTagName('pre');
    for (var i = 0; i < pres.length; i++){
		if (pres[i].getElementsByTagName('code').length > 0)pres[i].className  = 'line-numbers';
	}
}
function PrismReload() {
	if (typeof Prism !== 'undefined') {
      var pres = document.getElementsByTagName('pre');
      for (var i = 0; i < pres.length; i++){
        if (pres[i].getElementsByTagName('code').length > 0)
        pres[i].className  = 'line-numbers';
	  }
      Prism.highlightAll(true,null);
	}
}
//Search
function Search() {
	$(".search").toggleClass("ready");
	$(".search-close").toggleClass("ready");
}
//mobileMenu
function toggleMobileMenu() {
	$(".mobile-menu").toggleClass("ready");
	$(".mobile-menu-close").toggleClass("ready");
}
//Login
function Login() {
	$(".login").toggleClass("ready");
	$(".login-close").toggleClass("ready");
}
//owo
function owoLoad() {
	var OwO_demo = new OwO({
		logo: 'OωO表情',
		container: document.getElementsByClassName('OwO')[0],
		target: document.getElementsByClassName('OwO-textarea')[0],
		api: owoJson,
		position: 'down',
		width: '300px',
		maxHeight: '250px'
	});
}
//pjax-loader
if(loadPjax = true) {
  $(document).pjax('a[href^="'+siteurl+'"]:not(a[target="_blank"], a[no-pjax])', {
    container: '#pjax-container',fragment: '#pjax-container',timeout: 8000
  }).on('pjax:send', function () {
	GoTop();
	beforePjax();
  }).on('pjax:complete', function () {
	$('form#login-form').addClass('need-refresh');
	NProgress.done();
	LazyLoad();
	PrismReload();
	afterPjax();
  });
}